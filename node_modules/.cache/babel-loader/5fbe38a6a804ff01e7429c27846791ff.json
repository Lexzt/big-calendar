{"ast":null,"code":"/**\n * handle the en/decryption of documents-data\n */\nimport objectPath from 'object-path';\nimport { clone } from './util';\nimport RxError from './rx-error';\nexport var Crypter =\n/*#__PURE__*/\nfunction () {\n  function Crypter(password, schema) {\n    this._password = password;\n    this._schema = schema;\n  }\n  /**\n   * encrypt and stringify data\n   * @overwritten by plugin (optional)\n   * @param  {any} value\n   * @return {string}\n   */\n\n\n  var _proto = Crypter.prototype;\n\n  _proto._encryptValue = function _encryptValue() {\n    throw RxError.pluginMissing('encryption');\n  };\n  /**\n   * decrypt and json-parse an encrypted value\n   * @overwritten by plugin (optional)\n   * @param  {string} encValue\n   * @return {any}\n   */\n\n\n  _proto._decryptValue = function _decryptValue() {\n    throw RxError.pluginMissing('encryption');\n  };\n\n  _proto.encrypt = function encrypt(obj) {\n    var _this = this;\n\n    obj = clone(obj);\n    if (!this._password) return obj;\n    Object.keys(this._schema.encryptedPaths).map(function (path) {\n      var value = objectPath.get(obj, path);\n\n      var encrypted = _this._encryptValue(value);\n\n      objectPath.set(obj, path, encrypted);\n    });\n    return obj;\n  };\n\n  _proto.decrypt = function decrypt(obj) {\n    var _this2 = this;\n\n    obj = clone(obj);\n    if (!this._password) return obj;\n    Object.keys(this._schema.encryptedPaths).map(function (path) {\n      var value = objectPath.get(obj, path);\n\n      var decrypted = _this2._decryptValue(value);\n\n      objectPath.set(obj, path, decrypted);\n    });\n    return obj;\n  };\n\n  return Crypter;\n}();\nexport function create(password, schema) {\n  return new Crypter(password, schema);\n}\nexport default {\n  create: create,\n  Crypter: Crypter\n};","map":null,"metadata":{},"sourceType":"module"}