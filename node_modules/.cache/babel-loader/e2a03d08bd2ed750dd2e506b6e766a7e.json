{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sham/big-calendar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sham/big-calendar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { map, mergeMap, catchError } from 'rxjs/operators';\nimport { ofType } from 'redux-observable';\nimport { from } from 'rxjs';\nimport { API_KEY, GOOGLE_CLIENT_ID, GOOGLE_SCOPE } from '../utils/google';\nimport { BEGIN_GOOGLE_AUTH, successGoogleAuth, failGoogleAuth } from '../actions/auth';\nvar GoogleAuth;\n\nvar handleAuthClick = function handleAuthClick() {\n  if (GoogleAuth.isSignedIn.get()) {\n    console.log(\"Signed In to Google!\");\n  } else {\n    GoogleAuth.signIn();\n  }\n};\n\nvar loginGoogle =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", window.gapi.load('client:auth2', initClient));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this);\n  }));\n\n  return function loginGoogle() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar initClient =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2() {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", window.gapi.client.init({\n              'apiKey': API_KEY,\n              'clientId': GOOGLE_CLIENT_ID,\n              'scope': GOOGLE_SCOPE,\n              'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, this);\n  }));\n\n  return function initClient() {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var beginGoogleAuthEpic = function beginGoogleAuthEpic(action$) {\n  return action$.pipe(ofType(BEGIN_GOOGLE_AUTH), map(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3() {\n    var google;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return loginGoogle();\n\n          case 2:\n            google = _context3.sent;\n            debugger;\n            return _context3.abrupt(\"return\", failGoogleAuth());\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, this);\n  }))));\n};","map":{"version":3,"sources":["/Users/sham/big-calendar/src/epics/auth.js"],"names":["map","mergeMap","catchError","ofType","from","API_KEY","GOOGLE_CLIENT_ID","GOOGLE_SCOPE","BEGIN_GOOGLE_AUTH","successGoogleAuth","failGoogleAuth","GoogleAuth","handleAuthClick","isSignedIn","get","console","log","signIn","loginGoogle","window","gapi","load","initClient","client","init","beginGoogleAuthEpic","action$","pipe","google"],"mappings":";;AAAA,SAASA,GAAT,EAAcC,QAAd,EAAwBC,UAAxB,QAA0C,gBAA1C;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,SAASC,OAAT,EAAkBC,gBAAlB,EAAoCC,YAApC,QAAwD,iBAAxD;AACA,SACEC,iBADF,EAEEC,iBAFF,EAGEC,cAHF,QAIO,iBAJP;AAMA,IAAIC,UAAJ;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,MAAGD,UAAU,CAACE,UAAX,CAAsBC,GAAtB,EAAH,EAAgC;AAC9BC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACD,GAFD,MAGK;AACHL,IAAAA,UAAU,CAACM,MAAX;AACD;AACF,CAPD;;AASA,IAAMC,WAAW;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA,6CACXC,MAAM,CAACC,IAAP,CAAYC,IAAZ,CAAiB,cAAjB,EAAiCC,UAAjC,CADW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAXJ,WAAW;AAAA;AAAA;AAAA,GAAjB;;AAIA,IAAMI,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAG;AAAA;AAAA;AAAA;AAAA;AAAA,8CACVH,MAAM,CAACC,IAAP,CAAYG,MAAZ,CAAmBC,IAAnB,CAAwB;AAC3B,wBAAUnB,OADiB;AAE3B,0BAAYC,gBAFe;AAG3B,uBAASC,YAHkB;AAI3B,+BAAiB,CAAC,4DAAD;AAJU,aAAxB,CADU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAVe,UAAU;AAAA;AAAA;AAAA,GAAhB;;AAiBA,OAAO,IAAMG,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAAC,OAAO;AAAA,SAAIA,OAAO,CAACC,IAAR,CAC5CxB,MAAM,CAACK,iBAAD,CADsC,EAE5CR,GAAG;AAAA;AAAA;AAAA;AAAA,2BAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACmBkB,WAAW,EAD9B;;AAAA;AACIU,YAAAA,MADJ;AAEF;AAFE,8CAGKlB,cAAc,EAHnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAD,GAFyC,CAAJ;AAAA,CAAnC","sourcesContent":["import { map, mergeMap, catchError } from 'rxjs/operators';\nimport { ofType } from 'redux-observable';\nimport { from } from 'rxjs';\nimport { API_KEY, GOOGLE_CLIENT_ID, GOOGLE_SCOPE } from '../utils/google';\nimport {\n  BEGIN_GOOGLE_AUTH,\n  successGoogleAuth,\n  failGoogleAuth\n} from '../actions/auth';\n\nlet GoogleAuth;\n\nconst handleAuthClick = () => {\n  if(GoogleAuth.isSignedIn.get()) {\n    console.log(\"Signed In to Google!\");\n  }\n  else {\n    GoogleAuth.signIn();\n  }\n}\n\nconst loginGoogle = async () => {\n  return window.gapi.load('client:auth2', initClient);\n}\n\nconst initClient = async () => {\n  return window.gapi.client.init({\n      'apiKey': API_KEY,\n      'clientId': GOOGLE_CLIENT_ID,\n      'scope': GOOGLE_SCOPE,\n      'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest'],\n  })/*.then(() => {\n      GoogleAuth = window.gapi.auth2.getAuthInstance();\n      handleAuthClick();\n      const isAuthorized = GoogleAuth\n                      .currentUser\n                      .get()\n                      .hasGrantedScopes(GOOGLE_SCOPE);\n      return isAuthorized;\n  })*/\n}\n\nexport const beginGoogleAuthEpic = action$ => action$.pipe(\n  ofType(BEGIN_GOOGLE_AUTH),\n  map(async () => {\n    const google = await loginGoogle();\n    debugger;\n    return failGoogleAuth();\n  })\n)\n"]},"metadata":{},"sourceType":"module"}