{"ast":null,"code":"/**\n * stores the hooks that where added by the plugins\n */\n\n/**\n * hook-functions that can be extended by the plugin\n */\nexport var HOOKS = {\n  createRxDatabase: [],\n  preCreateRxCollection: [],\n  createRxCollection: [],\n\n  /**\n   * functions that get the json-schema as input\n   * to do additionally checks/manipulation\n   */\n  preCreateRxSchema: [],\n\n  /**\n   * functions that run after the RxSchema is created\n   * gets RxSchema as attribute\n   */\n  createRxSchema: [],\n  createRxQuery: [],\n  createRxDocument: [],\n\n  /**\n   * runs after a RxDocument is created,\n   * cannot be async\n   * @type {Array}\n   */\n  postCreateRxDocument: [],\n\n  /**\n   * runs before a pouchdb-instance is created\n   * gets pouchParameters as attribute so you can manipulate them\n   * {\n   *   location: string,\n   *   adapter: any,\n   *   settings: object\n   * }\n   * @type {Array}\n   */\n  preCreatePouchDb: [],\n\n  /**\n   * runs on the document-data before the document is migrated\n   * {\n   *   doc: Object, // originam doc-data\n   *   migrated: // migrated doc-data after run throught migration-strategies\n   * }\n   * @type {Array}\n   */\n  preMigrateDocument: [],\n\n  /**\n   * runs after the migration of a document has been done\n   * @type {Array}\n   */\n  postMigrateDocument: [],\n\n  /**\n   * runs at the beginning of the destroy-process of a database\n   * @type {Array}\n   */\n  preDestroyRxDatabase: []\n};\nexport function runPluginHooks(hookKey, obj) {\n  HOOKS[hookKey].forEach(function (fun) {\n    return fun(obj);\n  });\n}\n/**\n * @return {Promise}\n */\n\nexport function runAsyncPluginHooks(hookKey, obj) {\n  return Promise.all(HOOKS[hookKey].map(function (fun) {\n    return fun(obj);\n  }));\n}\n/**\n * used in tests to remove hooks\n */\n\nexport function clearHook(type, fun) {\n  HOOKS[type] = HOOKS[type].filter(function (h) {\n    return h !== fun;\n  });\n}\nexport default {\n  runPluginHooks: runPluginHooks,\n  runAsyncPluginHooks: runAsyncPluginHooks,\n  HOOKS: HOOKS\n};","map":null,"metadata":{},"sourceType":"module"}