{"ast":null,"code":"import _readOnlyError from \"/Users/Sameenhaja/big-calendar/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nimport { createLogger } from 'redux-logger';\nimport request from 'superagent';\nexport var loggerMiddleware = createLogger();\nvar CALENDAR_ID = 'shamsheer619@gmail.com';\nvar CLIENT_ID = '65724758895-gc7lubjkjsqqddfhlb7jcme80i3mjqn0.apps.googleusercontent.com';\nvar API_KEY = 'AIzaSyCTYXWtoRKnXeZkPCcZwYOXm0Qz3Lz9F9g';\nvar SCOPE = \"https://www.googleapis.com/auth/calendar.events\";\nvar GoogleAuth;\nvar isAuthorized;\n\nfunction initClient() {\n  window.gapi.client.init({\n    'apiKey': API_KEY,\n    'clientId': CLIENT_ID,\n    'scope': SCOPE,\n    'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']\n  }).then(function () {\n    GoogleAuth = window.gapi.auth2.getAuthInstance(); // Listen for sign-in state changes.\n\n    GoogleAuth.isSignedIn.listen(updateSigninStatus); // Handle initial sign-in state. (Determine if user is already signed in)\n\n    var user = GoogleAuth.currentUser.get();\n    oauthSignIn();\n  });\n}\n\nfunction handleAuthClick() {\n  if (GoogleAuth.isSignedIn.get()) {\n    // User is authorized and has clicked 'Sign out' button.\n    GoogleAuth.signOut();\n  } else {\n    // User is not signed in. Start Google auth flow.\n    GoogleAuth.signIn();\n  }\n}\n\nfunction updateSigninStatus(isSignedIn) {\n  setSigninStatus();\n}\n\nfunction oauthSignIn() {\n  // Google's OAuth 2.0 endpoint for requesting an access token\n  var oauth2Endpoint = 'https://accounts.google.com/o/oauth2/v2/auth'; // Create <form> element to submit parameters to OAuth 2.0 endpoint.\n\n  var form = document.createElement('form');\n  form.setAttribute('method', 'GET'); // Send as a GET request.\n\n  form.setAttribute('action', oauth2Endpoint); // Parameters to pass to OAuth 2.0 endpoint.\n\n  var params = {\n    'client_id': CLIENT_ID,\n    'redirect_uri': '\thttp://localhost:3000/redirect\t',\n    'response_type': 'token',\n    'scope': SCOPE,\n    'include_granted_scopes': 'true',\n    'state': 'pass-through value'\n  }; // Add form parameters as hidden input values.\n\n  for (var p in params) {\n    var input = document.createElement('input');\n    input.setAttribute('type', 'hidden');\n    input.setAttribute('name', p);\n    input.setAttribute('value', params[p]);\n    form.appendChild(input);\n  } // Add form to page and submit it to open the OAuth 2.0 endpoint.\n\n\n  document.body.appendChild(form);\n  form.submit();\n}\n\nfunction setSigninStatus(isSignedIn) {\n  var user = GoogleAuth.currentUser.get();\n  var isAuthorized = user.hasGrantedScopes(SCOPE);\n\n  if (isAuthorized) {} else {}\n}\n\nfunction sendAuthorizedApiRequest(requestDetails) {\n  var currentApiRequest = requestDetails;\n\n  if (isAuthorized) {\n    // Make API request\n    window.gapi.client.request(requestDetails); // Reset currentApiRequest variable.\n\n    currentApiRequest = (_readOnlyError(\"currentApiRequest\"), {});\n  } else {\n    GoogleAuth.signIn();\n  }\n}\n\nexport var apiMiddleware = function apiMiddleware(store) {\n  return function (next) {\n    return function (action) {\n      if (action.type === 'GET_EVENTS') {\n        initClient();\n      }\n\n      return next(action);\n    };\n  };\n};","map":{"version":3,"sources":["/Users/Sameenhaja/big-calendar/src/redux/middleware.js"],"names":["createLogger","request","loggerMiddleware","CALENDAR_ID","CLIENT_ID","API_KEY","SCOPE","GoogleAuth","isAuthorized","initClient","window","gapi","client","init","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","user","currentUser","get","oauthSignIn","handleAuthClick","signOut","signIn","setSigninStatus","oauth2Endpoint","form","document","createElement","setAttribute","params","p","input","appendChild","body","submit","hasGrantedScopes","sendAuthorizedApiRequest","requestDetails","currentApiRequest","apiMiddleware","store","next","action","type"],"mappings":"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","sourcesContent":["import { createLogger } from 'redux-logger';\nimport request from  'superagent';\nexport const loggerMiddleware = createLogger();\n\nconst CALENDAR_ID = 'shamsheer619@gmail.com';\nconst CLIENT_ID = '65724758895-gc7lubjkjsqqddfhlb7jcme80i3mjqn0.apps.googleusercontent.com';\nconst API_KEY = 'AIzaSyCTYXWtoRKnXeZkPCcZwYOXm0Qz3Lz9F9g';\nconst SCOPE = `https://www.googleapis.com/auth/calendar.events`;\nlet GoogleAuth;\nlet isAuthorized;\n\nfunction initClient() {\n  window.gapi.client.init({\n      'apiKey': API_KEY,\n      'clientId': CLIENT_ID,\n      'scope': SCOPE,\n      'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']\n  }).then(function () {\n      GoogleAuth = window.gapi.auth2.getAuthInstance();\n\n      // Listen for sign-in state changes.\n      GoogleAuth.isSignedIn.listen(updateSigninStatus);\n\n\n      // Handle initial sign-in state. (Determine if user is already signed in)\n      let user = GoogleAuth.currentUser.get();\n\n      oauthSignIn();\n  });\n}\n\nfunction handleAuthClick() {\n  if (GoogleAuth.isSignedIn.get()) {\n      // User is authorized and has clicked 'Sign out' button.\n      GoogleAuth.signOut();\n  } else {\n      // User is not signed in. Start Google auth flow.\n      GoogleAuth.signIn();\n    }\n}\n\nfunction updateSigninStatus(isSignedIn) {\n  setSigninStatus();\n}\n\nfunction oauthSignIn() {\n  // Google's OAuth 2.0 endpoint for requesting an access token\n  var oauth2Endpoint = 'https://accounts.google.com/o/oauth2/v2/auth';\n\n  // Create <form> element to submit parameters to OAuth 2.0 endpoint.\n  var form = document.createElement('form');\n  form.setAttribute('method', 'GET'); // Send as a GET request.\n  form.setAttribute('action', oauth2Endpoint);\n\n  // Parameters to pass to OAuth 2.0 endpoint.\n  var params = {'client_id': CLIENT_ID,\n                'redirect_uri': '\thttp://localhost:3000/redirect\t',\n                'response_type': 'token',\n                'scope': SCOPE,\n                'include_granted_scopes': 'true',\n                'state': 'pass-through value'};\n\n  // Add form parameters as hidden input values.\n  for (var p in params) {\n    var input = document.createElement('input');\n    input.setAttribute('type', 'hidden');\n    input.setAttribute('name', p);\n    input.setAttribute('value', params[p]);\n    form.appendChild(input);\n  }\n\n  // Add form to page and submit it to open the OAuth 2.0 endpoint.\n  document.body.appendChild(form);\n  form.submit();\n}\n\nfunction setSigninStatus(isSignedIn) {\n   var user = GoogleAuth.currentUser.get();\n   var isAuthorized = user.hasGrantedScopes(SCOPE);\n   if (isAuthorized) {\n   } else {\n   }\n }\n\n\nfunction sendAuthorizedApiRequest(requestDetails) {\n  const currentApiRequest = requestDetails;\n  if (isAuthorized) {\n    // Make API request\n    window.gapi.client.request(requestDetails)\n\n    // Reset currentApiRequest variable.\n    currentApiRequest = {};\n  } else {\n    GoogleAuth.signIn();\n  }\n}\n\nexport const apiMiddleware = store => next => action => {\n  if(action.type === 'GET_EVENTS') {\n    initClient();\n  }\n  return next(action);\n}\n"]},"metadata":{},"sourceType":"module"}