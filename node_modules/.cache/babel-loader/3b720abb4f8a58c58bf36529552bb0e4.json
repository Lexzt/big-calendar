{"ast":null,"code":"import { createLogger } from 'redux-logger';\nimport request from 'superagent';\nexport var loggerMiddleware = createLogger();\nvar CALENDAR_ID = 'shamsheer619@gmail.com';\nvar CLIENT_ID = '65724758895-gc7lubjkjsqqddfhlb7jcme80i3mjqn0.apps.googleusercontent.com';\nvar API_KEY = 'AIzaSyCTYXWtoRKnXeZkPCcZwYOXm0Qz3Lz9F9g';\nvar SCOPE = \"https://www.googleapis.com/auth/calendar.events\";\nvar GoogleAuth;\n\nfunction initClient() {\n  window.gapi.client.init({\n    'apiKey': API_KEY,\n    'clientId': CLIENT_ID,\n    'scope': SCOPE,\n    'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']\n  }).then(function () {\n    GoogleAuth = window.gapi.auth2.getAuthInstance(); // Listen for sign-in state changes.\n\n    GoogleAuth.isSignedIn.listen(updateSigninStatus); // Handle initial sign-in state. (Determine if user is already signed in)\n\n    var user = GoogleAuth.currentUser.get();\n    return gapi.client.request({\n      'path': \"https://www.googleapis.com/calendar/v3/calendars/\".concat(CALENDAR_ID, \"/events\")\n    });\n  }).then(function (response) {\n    var events = response.result.items;\n    that.setState({\n      events: events\n    }, function () {\n      console.log(that.state.events);\n    });\n  }, function (reason) {\n    console.log(reason);\n  });\n}\n\nfunction revokeAccess() {\n  GoogleAuth.disconnect();\n}\n\nfunction handleAuthClick() {\n  if (GoogleAuth.isSignedIn.get()) {\n    // User is authorized and has clicked 'Sign out' button.\n    GoogleAuth.signOut();\n  } else {\n    // User is not signed in. Start Google auth flow.\n    GoogleAuth.signIn();\n  }\n}\n\nfunction updateSigninStatus(isSignedIn) {\n  setSigninStatus();\n}\n\nfunction setSigninStatus(isSignedIn) {\n  var user = GoogleAuth.currentUser.get();\n  var isAuthorized = user.hasGrantedScopes(SCOPE);\n\n  if (isAuthorized) {\n    console.log(\"Authorized\");\n  } else {\n    console.log(\"Not authorized\");\n  }\n}\n\nvar pageToken = null;\n\nfunction makeApiCall() {\n  var request = window.gapi.client.request({\n    'path': \"https://www.googleapis.com/calendar/v3/calendars/\".concat(CALENDAR_ID, \"/events\")\n  }); // Execute the API request.\n\n  request.execute(function (response) {\n    console.log(response);\n  });\n}\n\nfunction handleClientLoad() {\n  window.gapi.load('client:auth2', initClient);\n}\n\nexport var apiMiddleware = function apiMiddleware(store) {\n  return function (next) {\n    return function (action) {\n      if (action.type === 'GET_EVENTS') {\n        handleClientLoad();\n        makeApiCall();\n      }\n\n      return next(action);\n    };\n  };\n};","map":{"version":3,"sources":["/Users/Sameenhaja/big-calendar/src/redux/middleware.js"],"names":["createLogger","request","loggerMiddleware","CALENDAR_ID","CLIENT_ID","API_KEY","SCOPE","GoogleAuth","initClient","window","gapi","client","init","then","auth2","getAuthInstance","isSignedIn","listen","updateSigninStatus","user","currentUser","get","response","events","result","items","that","setState","console","log","state","reason","revokeAccess","disconnect","handleAuthClick","signOut","signIn","setSigninStatus","isAuthorized","hasGrantedScopes","pageToken","makeApiCall","execute","handleClientLoad","load","apiMiddleware","store","next","action","type"],"mappings":"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","sourcesContent":["import { createLogger } from 'redux-logger';\nimport request from  'superagent';\nexport const loggerMiddleware = createLogger();\n\nconst CALENDAR_ID = 'shamsheer619@gmail.com';\nconst CLIENT_ID = '65724758895-gc7lubjkjsqqddfhlb7jcme80i3mjqn0.apps.googleusercontent.com';\nconst API_KEY = 'AIzaSyCTYXWtoRKnXeZkPCcZwYOXm0Qz3Lz9F9g';\nconst SCOPE = `https://www.googleapis.com/auth/calendar.events`;\nvar GoogleAuth;\n\n\nfunction initClient() {\n  window.gapi.client.init({\n      'apiKey': API_KEY,\n      'clientId': CLIENT_ID,\n      'scope': SCOPE,\n      'discoveryDocs': ['https://www.googleapis.com/discovery/v1/apis/drive/v3/rest']\n  }).then(function () {\n      GoogleAuth = window.gapi.auth2.getAuthInstance();\n\n      // Listen for sign-in state changes.\n      GoogleAuth.isSignedIn.listen(updateSigninStatus);\n\n\n      // Handle initial sign-in state. (Determine if user is already signed in)\n      var user = GoogleAuth.currentUser.get();\n\n      return gapi.client.request({\n        'path': `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events`,\n      })\n  }).then( (response) => {\n      let events = response.result.items\n      that.setState({\n        events\n      }, ()=>{\n        console.log(that.state.events);\n      })\n    }, function(reason) {\n      console.log(reason);\n  });\n}\n\n\n\nfunction revokeAccess() {\n  GoogleAuth.disconnect();\n}\n\nfunction handleAuthClick() {\n  if (GoogleAuth.isSignedIn.get()) {\n      // User is authorized and has clicked 'Sign out' button.\n      GoogleAuth.signOut();\n  } else {\n      // User is not signed in. Start Google auth flow.\n      GoogleAuth.signIn();\n    }\n}\n\nfunction updateSigninStatus(isSignedIn) {\n  setSigninStatus();\n}\n\nfunction setSigninStatus(isSignedIn) {\n  var user = GoogleAuth.currentUser.get();\n  var isAuthorized = user.hasGrantedScopes(SCOPE);\n  if (isAuthorized) {\n    console.log(\"Authorized\");\n  } else {\n    console.log(\"Not authorized\");\n  }\n}\n\nconst pageToken = null;\n\nfunction makeApiCall() {\n  var request = window.gapi.client.request({\n    'path': `https://www.googleapis.com/calendar/v3/calendars/${CALENDAR_ID}/events`,\n  });\n\n// Execute the API request.\n  request.execute(function(response) {\n    console.log(response);\n  });\n}\n\n\nfunction handleClientLoad() {\n  window.gapi.load('client:auth2', initClient);\n}\n\nexport const apiMiddleware = store => next => action => {\n  if(action.type === 'GET_EVENTS') {\n    handleClientLoad();\n    makeApiCall();\n\n  }\n  return next(action);\n}\n"]},"metadata":{},"sourceType":"module"}